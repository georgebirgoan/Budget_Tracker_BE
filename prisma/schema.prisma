// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  fullName  String
  role      Role     @default(USER)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  session Session[]
}

model Session {
  id     Int  @id @default(autoincrement())
  user   User @relation(fields: [userId], references: [id])
  userId Int

  refreshToken String? @unique
  userAgent    String?
  ip           String?
  deviceName   String?

  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  expiresAt    DateTime
  deconectedAt DateTime?
  revoked      Boolean  @default(false)
}

enum Role {
  USER
  ADMIN
}

model oferte_2025 {
  codunicoferta Int @id

  creatin      Int    @unique
  codintern    Int
  creatde      String
  idunicclient Int
  idunicoferta Int

  inregistratde    String
  container        String
  nume             String
  nroferta         Int
  datacreare       DateTime
  datainregistrare DateTime
  datamodificare   DateTime
  datalivrare      DateTime
  datamontaj       DateTime
  totalsuprafata   Int?
  totalferestreusi Int?
  totalferestre    Int?
  totalusi         Int?
  totalusibalcon   Int?
  totaltermopane   Int?
  totalpaneluri    Int?
  totalpret        Int?
  culoare          String?

  actiuni actiuni_2025_12[]

  @@index([codintern])
  @@index([creatde])
  @@index([creatin])
  @@index([idunicclient])
  @@index([idunicoferta])
}

model actiuni_2025_12 {
  nrinreg        Int      @id
  codunicoferta  Int
  username       String
  data           DateTime
  actiune        String
  coduniccomanda Int
  idunicoferta   Int
  numefisier     String
  obs            String

  oferta oferte_2025 @relation(fields: [codunicoferta], references: [codunicoferta])

  @@index([nrinreg])
}
